apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: go-nomads

# 基础资源
resources:
  # 基础配置
  - base/namespace.yaml
  - base/configmap.yaml
  - base/secrets.yaml
  
  # 基础设施
  - infrastructure/redis.yaml
  - infrastructure/rabbitmq.yaml
  - infrastructure/elasticsearch.yaml
  - infrastructure/consul.yaml
  
  # 监控服务
  - monitoring/prometheus.yaml
  - monitoring/grafana.yaml
  - monitoring/zipkin.yaml
  
  # 业务服务
  - services/gateway.yaml
  - services/user-service.yaml
  - services/city-service.yaml
  - services/coworking-service.yaml
  - services/event-service.yaml
  - services/ai-service.yaml
  - services/message-service.yaml
  - services/cache-service.yaml

# 通用标签
commonLabels:
  app.kubernetes.io/part-of: go-nomads-platform
  app.kubernetes.io/managed-by: kustomize

# 通用注解
commonAnnotations:
  app.kubernetes.io/version: "1.0.0"
